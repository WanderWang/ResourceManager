!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.async=t.async||{})}(this,function(t){"use strict";function n(t,n,e){var r=e.length;switch(r){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function e(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function r(t){var n=e(t)?Ke.call(t):"";return n==Qe||n==Xe}function o(t){if(e(t)){var n=r(t.valueOf)?t.valueOf():t;t=e(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ye,"");var o=tr.test(t);return o||nr.test(t)?er(t.slice(2),o?2:8):Ze.test(t)?Ve:+t}function u(t){if(!t)return 0===t?t:0;if(t=o(t),t===rr||t===-rr){var n=0>t?-1:1;return n*or}var e=t%1;return t===t?e?t-e:t:0}function i(t,e){if("function"!=typeof t)throw new TypeError(ur);return e=ir(void 0===e?t.length-1:u(e),0),function(){for(var r=arguments,o=-1,u=ir(r.length-e,0),i=Array(u);++o<u;)i[o]=r[e+o];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,r[0],i);case 2:return t.call(this,r[0],r[1],i)}var c=Array(e+1);for(o=-1;++o<e;)c[o]=r[o];return c[e]=i,n(t,this,c)}}function c(t){return i(function(n,e){var r=i(function(e){var r=this,o=e.pop();return t(n,function(t,n,o){t.apply(r,e.concat([o]))},o)});return e.length?r.apply(this,e):r})}function a(){}function f(t,n){var e;if("function"!=typeof n)throw new TypeError(cr);return t=u(t),function(){return--t>0&&(e=n.apply(this,arguments)),1>=t&&(n=void 0),e}}function l(t){return f(2,t)}function s(t){return function(n){return null==n?void 0:n[t]}}function p(t){return"number"==typeof t&&t>-1&&t%1==0&&fr>=t}function y(t){return null!=t&&p(ar(t))&&!r(t)}function h(t,n){return sr.call(t,n)||"object"==typeof t&&n in t&&null===pr(t)}function v(t){return yr(Object(t))}function d(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}function g(t){return!!t&&"object"==typeof t}function m(t){return g(t)&&y(t)}function b(t){return m(t)&&dr.call(t,"callee")&&(!mr.call(t,"callee")||gr.call(t)==hr)}function j(t){return"string"==typeof t||!br(t)&&g(t)&&Or.call(t)==jr}function E(t){var n=t?t.length:void 0;return p(n)&&(br(t)||j(t)||b(t))?d(n,String):null}function O(t,n){return t="number"==typeof t||_r.test(t)?+t:-1,n=null==n?wr:n,t>-1&&t%1==0&&n>t}function w(t){var n=t&&t.constructor,e="function"==typeof n&&n.prototype||Sr;return t===e}function _(t){var n=w(t);if(!n&&!y(t))return v(t);var e=E(t),r=!!e,o=e||[],u=o.length;for(var i in t)!h(t,i)||r&&("length"==i||O(i,u))||n&&"constructor"==i||o.push(i);return o}function S(t){var n,e=-1;if(y(t))return n=t.length,function(){return e++,n>e?e:null};var r=_(t);return n=r.length,function(){return e++,n>e?r[e]:null}}function L(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function R(t){return function(n,e,r){r=l(r||a),n=n||[];var o=S(n);if(0>=t)return r(null);var u=!1,i=0,c=!1;!function f(){if(u&&0>=i)return r(null);for(;t>i&&!c;){var a=o();if(null===a)return u=!0,void(0>=i&&r(null));i+=1,e(n[a],a,L(function(t){i-=1,t?(r(t),c=!0):f()}))}}()}}function A(t,n,e,r){R(n)(t,e,r)}function k(t,n){return function(e,r,o){return t(e,n,r,o)}}function x(t){return i(function(n){var r,o=n.pop();try{r=t.apply(this,n)}catch(u){return o(u)}e(r)&&"function"==typeof r.then?r.then(function(t){o(null,t)})["catch"](function(t){o(t.message?t:new Error(t))}):o(null,r)})}function C(t,n){for(var e=-1,r=t.length;++e<r&&n(t[e],e,t)!==!1;);return t}function M(t){return t}function T(t){return"function"==typeof t?t:M}function I(t){return function(n,e,r){for(var o=-1,u=Object(n),i=r(n),c=i.length;c--;){var a=i[t?c:++o];if(e(u[a],a,u)===!1)break}return n}}function P(t,n){return t&&Cr(t,n,_)}function U(t,n){return t&&P(t,T(n))}function F(t,n,e){for(var r=t.length,o=n+(e?0:-1);e?o--:++o<r;){var u=t[o];if(u!==u)return o}return-1}function D(t,n,e){if(n!==n)return F(t,e);for(var r=e-1,o=t.length;++r<o;)if(t[r]===n)return r;return-1}function G(t,n,e){var r=t?t.length:0;return r?(e=u(e),0>e&&(e=Mr(r+e,0)),D(t,n,e)):-1}function $(t,n,e){function r(t,n){g.push(function(){f(t,n)})}function o(){if(0===g.length&&0===h)return e(null,y);for(;g.length&&n>h;){var t=g.shift();t()}}function u(t,n){var e=d[t];e||(e=d[t]=[]),e.push(n)}function c(t){var n=d[t]||[];C(n,function(t){t()}),o()}function f(t,n){if(!v){var r=L(i(function(n,r){if(h--,r.length<=1&&(r=r[0]),n){var o={};U(y,function(t,n){o[n]=t}),o[t]=r,v=!0,d=[],e(n,o)}else y[t]=r,c(t)}));h++;var o=n[n.length-1];n.length>1?o(y,r):o(r)}}"function"==typeof n&&(e=n,n=null),e=l(e||a);var s=_(t),p=s.length;if(!p)return e(null);n||(n=p);var y={},h=0,v=!1,d={},g=[];U(t,function(n,e){function o(){for(var n,r=i.length;r--;){if(!(n=t[i[r]]))throw new Error("async.auto task `"+e+"` has non-existent dependency in "+i.join(", "));if(br(n)&&G(n,e)>=0)throw new Error("async.auto task `"+e+"`Has cyclic dependencies")}}if(!br(n))return void r(e,[n]);var i=n.slice(0,n.length-1),c=i.length;o(),C(i,function(t){u(t,function(){c--,0===c&&r(e,n)})})}),o()}function N(t,n){for(var e=-1,r=t.length,o=Array(r);++e<r;)o[e]=n(t[e],e,t);return o}function z(){this.__data__={array:[],map:null}}function q(t,n){return t===n||t!==t&&n!==n}function B(t,n){for(var e=t.length;e--;)if(q(t[e][0],n))return e;return-1}function J(t,n){var e=B(t,n);if(0>e)return!1;var r=t.length-1;return e==r?t.pop():Ir.call(t,e,1),!0}function W(t){var n=this.__data__,e=n.array;return e?J(e,t):n.map["delete"](t)}function Q(t,n){var e=B(t,n);return 0>e?void 0:t[e][1]}function X(t){var n=this.__data__,e=n.array;return e?Q(e,t):n.map.get(t)}function H(t,n){return B(t,n)>-1}function K(t){var n=this.__data__,e=n.array;return e?H(e,t):n.map.has(t)}function V(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(e){}return n}function Y(t){return null==t?!1:r(t)?$r.test(Dr.call(t)):g(t)&&(V(t)?$r:Ur).test(t)}function Z(t,n){var e=t[n];return Y(e)?e:void 0}function tn(){}function nn(t){return t&&t.Object===Object?t:null}function en(){this.__data__={hash:new tn,map:Vr?new Vr:[],string:new tn}}function rn(t,n){return Nr?void 0!==t[n]:Zr.call(t,n)}function on(t,n){return rn(t,n)&&delete t[n]}function un(t){var n=typeof t;return"number"==n||"boolean"==n||"string"==n&&"__proto__"!=t||null==t}function cn(t){var n=this.__data__;return un(t)?on("string"==typeof t?n.string:n.hash,t):Vr?n.map["delete"](t):J(n.map,t)}function an(t,n){if(Nr){var e=t[n];return e===to?void 0:e}return eo.call(t,n)?t[n]:void 0}function fn(t){var n=this.__data__;return un(t)?an("string"==typeof t?n.string:n.hash,t):Vr?n.map.get(t):Q(n.map,t)}function ln(t){var n=this.__data__;return un(t)?rn("string"==typeof t?n.string:n.hash,t):Vr?n.map.has(t):H(n.map,t)}function sn(t,n,e){var r=B(t,n);0>r?t.push([n,e]):t[r][1]=e}function pn(t,n,e){t[n]=Nr&&void 0===e?ro:e}function yn(t,n){var e=this.__data__;return un(t)?pn("string"==typeof t?e.string:e.hash,t,n):Vr?e.map.set(t,n):sn(e.map,t,n),this}function hn(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function vn(t,n){var e=this.__data__,r=e.array;r&&(r.length<oo-1?sn(r,t,n):(e.array=null,e.map=new hn(r)));var o=e.map;return o&&o.set(t,n),this}function dn(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function gn(t,n,e){var r=t[n];io.call(t,n)&&q(r,e)&&(void 0!==e||n in t)||(t[n]=e)}function mn(t,n,e,r){e||(e={});for(var o=-1,u=n.length;++o<u;){var i=n[o],c=r?r(e[i],t[i],i,e,t):t[i];gn(e,i,c)}return e}function bn(t,n,e){return mn(t,n,e)}function jn(t,n){return t&&bn(n,_(n),t)}function En(t,n){if(n)return t.slice();var e=new t.constructor(t.length);return t.copy(e),e}function On(t,n){var e=-1,r=t.length;for(n||(n=Array(r));++e<r;)n[e]=t[e];return n}function wn(t,n){return bn(t,ao(t),n)}function _n(t){return mo.call(t)}function Sn(t){var n=t.length,e=t.constructor(n);return n&&"string"==typeof t[0]&&_o.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function Ln(t){var n=new t.constructor(t.byteLength);return new So(n).set(new So(t)),n}function Rn(t,n){return t.set(n[0],n[1]),t}function An(t,n,e,r){var o=-1,u=t.length;for(r&&u&&(e=t[++o]);++o<u;)e=n(e,t[o],o,t);return e}function kn(t){var n=-1,e=Array(t.size);return t.forEach(function(t,r){e[++n]=[r,t]}),e}function xn(t){return An(kn(t),Rn,new t.constructor)}function Cn(t){var n=new t.constructor(t.source,Lo.exec(t));return n.lastIndex=t.lastIndex,n}function Mn(t,n){return t.add(n),t}function Tn(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=t}),e}function In(t){return An(Tn(t),Mn,new t.constructor)}function Pn(t){return ko?Object(ko.call(t)):{}}function Un(t,n){var e=n?Ln(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function Fn(t,n,e){var r=t.constructor;switch(n){case Do:return Ln(t);case xo:case Co:return new r(+t);case Go:case $o:case No:case zo:case qo:case Bo:case Jo:case Wo:case Qo:return Un(t,e);case Mo:return xn(t);case To:case Uo:return new r(t);case Io:return Cn(t);case Po:return In(t);case Fo:return Pn(t)}}function Dn(t){return e(t)?Xo(t):{}}function Gn(t){return"function"!=typeof t.constructor||w(t)?{}:Dn(Ho(t))}function $n(t){return function(){return t}}function Nn(t,n,r,o,u,i,c){var a;if(o&&(a=i?o(t,u,i,c):o(t)),void 0!==a)return a;if(!e(t))return t;var f=br(t);if(f){if(a=Sn(t),!n)return On(t,a)}else{var l=Oo(t),s=l==cu||l==au;if(nu(t))return En(t,n);if(l==su||l==eu||s&&!i){if(V(t))return i?t:{};if(a=Gn(s?{}:t),!n)return a=jn(a,t),r?wn(t,a):a}else{if(!Ru[l])return i?t:{};a=Fn(t,l,n)}}c||(c=new dn);var p=c.get(t);return p?p:(c.set(t,a),(f?C:P)(t,function(e,u){gn(a,u,Nn(e,n,r,o,u,t,c))}),r&&!f?wn(t,a):a)}function zn(t){return t.toString().match(ku)[1].split(/\s*\,\s*/)}function qn(t,n){var e={};U(t,function(t,n){function r(n,e){var r=N(o,function(t){return n[t]});r.push(e),t.apply(null,r)}var o;if(br(t))o=Nn(t),t=o.pop(),e[n]=o.concat(r);else{if(0===t.length)throw new Error("autoInject task functions require explicit parameters.");1===t.length?e[n]=t:(o=zn(t),o.pop(),e[n]=o.concat(r))}}),$(e,n)}function Bn(t,n,e){function r(t,n,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");return t.started=!0,br(n)||(n=[n]),0===n.length&&t.idle()?Cu(function(){t.drain()}):(C(n,function(n){var o={data:n,callback:r||a};e?t.tasks.unshift(o):t.tasks.push(o),t.tasks.length===t.concurrency&&t.saturated(),t.tasks.length<=t.concurrency-t.buffer&&t.unsaturated()}),void Cu(t.process))}function o(t,n){return function(){u-=1;var e=!1,r=arguments;C(n,function(t){C(i,function(n,r){n!==t||e||(i.splice(r,1),e=!0)}),t.callback.apply(t,r)}),t.tasks.length+u===0&&t.drain(),t.process()}}if(null==n)n=1;else if(0===n)throw new Error("Concurrency must not be zero");var u=0,i=[],c={tasks:[],concurrency:n,payload:e,saturated:a,unsaturated:a,buffer:n/4,empty:a,drain:a,started:!1,paused:!1,push:function(t,n){r(c,t,!1,n)},kill:function(){c.drain=a,c.tasks=[]},unshift:function(t,n){r(c,t,!0,n)},process:function(){for(;!c.paused&&u<c.concurrency&&c.tasks.length;){var n=c.payload?c.tasks.splice(0,c.payload):c.tasks.splice(0,c.tasks.length),e=N(n,s("data"));0===c.tasks.length&&c.empty(),u+=1,i.push(n[0]);var r=L(o(c,n));t(e,r)}},length:function(){return c.tasks.length},running:function(){return u},workersList:function(){return i},idle:function(){return c.tasks.length+u===0},pause:function(){c.paused=!0},resume:function(){if(c.paused!==!1){c.paused=!1;for(var t=Math.min(c.concurrency,c.tasks.length),n=1;t>=n;n++)Cu(c.process)}}};return c}function Jn(t,n){return Bn(t,1,n)}function Wn(t,n,e,r){Ar(t,function(t,r,o){e(n,t,function(t,e){n=e,o(t)})},function(t){r(t,n)})}function Qn(){var t=arguments;return i(function(n){var e=this,r=n[n.length-1];"function"==typeof r?n.pop():r=a,Wn(t,n,function(t,n,r){n.apply(e,t.concat([i(function(t,n){r(t,n)})]))},function(t,n){r.apply(e,[t].concat(n))})})}function Xn(){return Qn.apply(null,Mu.call(arguments))}function Hn(t,n,e,r){var o=[];t(n,function(t,n,r){e(t,function(t,n){o=o.concat(n||[]),r(t)})},function(t){r(t,o)})}function Kn(t){return function(n,e,r){return t(Lr,n,e,r)}}function Vn(t){return function(n,e,r){return t(Ar,n,e,r)}}function Yn(t,n,e){return function(r,o,u,i){function c(t){i&&(t?i(t):i(null,e(!1)))}function a(t,r,o){return i?void u(t,function(r,c){i&&(r?(i(r),i=u=!1):n(c)&&(i(null,e(!0,t)),i=u=!1)),o()}):o()}arguments.length>3?t(r,o,a,c):(i=u,u=o,t(r,a,c))}}function Zn(t,n){return n}function te(t){return i(function(n,e){n.apply(null,e.concat([i(function(n,e){"object"==typeof console&&(n?console.error&&console.error(n):console[t]&&C(e,function(n){console[t](n)}))})]))})}function ne(t,n,e){e=e||a;var r=i(function(n,r){n?e(n):(r.push(o),t.apply(this,r))}),o=function(t,o){return t?e(t):o?void n(r):e(null)};t(o)}function ee(t,n,e){var r=0;ne(function(t){return r++<1?t(null,!0):void n.apply(this,arguments)},t,e)}function re(t,n,e){if(e=e||a,!t())return e(null);var r=i(function(o,u){return o?e(o):t.apply(this,u)?n(r):void e.apply(null,[null].concat(u))});n(r)}function oe(t,n,e){var r=0;return re(function(){return++r<=1||n.apply(this,arguments)},t,e)}function ue(t,n,e){return oe(t,function(){return!n.apply(this,arguments)},e)}function ie(t){return function(n,e,r){return t(n,r)}}function ce(t,n,e,r){return R(n)(t,ie(e),r)}function ae(t){return i(function(n){var e=n.pop(),r=!0;n.push(function(){var t=arguments;r?Cu(function(){e.apply(null,t)}):e.apply(null,t)}),t.apply(this,n),r=!1})}function fe(t){return!t}function le(t,n,e,r){var o=[];t(n,function(t,n,r){e(t,function(e,u){e?r(e):(u&&o.push({index:n,value:t}),r())})},function(t){t?r(t):r(null,N(o.sort(function(t,n){return t.index-n.index}),s("value")))})}function se(t){return function(n,e,r,o){return t(R(e),n,r,o)}}function pe(t,n){function e(t){return t?r(t):void o(e)}var r=L(n||a),o=ae(t);e()}function ye(t){function n(e){function r(){return t.length&&t[e].apply(null,arguments),r.next()}return r.next=function(){return e<t.length-1?n(e+1):null},r}return n(0)}function he(t,n,e,r){r=l(r||a),n=n||[];var o=y(n)?[]:{};t(n,function(t,n,r){e(t,function(t,e){o[n]=e,r(t)})},function(t){r(t,o)})}function ve(t){return"symbol"==typeof t||g(t)&&ti.call(t)==Yu}function de(t){if("string"==typeof t)return t;if(null==t)return"";if(ve(t))return ri?ri.call(t):"";var n=t+"";return"0"==n&&1/t==-ni?"-0":n}function ge(t){var n=[];return de(t).replace(oi,function(t,e,r,o){n.push(r?o.replace(ui,"$1"):e||t)}),n}function me(t){return br(t)?t:ge(t)}function be(t,n){return"number"==typeof t?!0:!br(t)&&(ci.test(t)||!ii.test(t)||null!=n&&t in Object(n))}function je(t){var n=t?t.length:0;return n?t[n-1]:void 0}function Ee(t,n,e){var r=-1,o=t.length;0>n&&(n=-n>o?0:o+n),e=e>o?o:e,0>e&&(e+=o),o=n>e?0:e-n>>>0,n>>>=0;for(var u=Array(o);++r<o;)u[r]=t[r+n];return u}function Oe(t,n){n=be(n,t)?[n+""]:me(n);for(var e=0,r=n.length;null!=t&&r>e;)t=t[n[e++]];return e&&e==r?t:void 0}function we(t,n,e){var r=null==t?void 0:Oe(t,n);return void 0===r?e:r}function _e(t,n){return 1==n.length?t:we(t,Ee(n,0,-1))}function Se(t,n,e){if(null==t)return!1;var r=e(t,n);r||be(n)||(n=me(n),t=_e(t,n),null!=t&&(n=je(n),r=e(t,n)));var o=t?t.length:void 0;return r||!!o&&p(o)&&O(n,o)&&(br(t)||j(t)||b(t))}function Le(t,n){return Se(t,n,h)}function Re(t,n){var e=Object.create(null),r=Object.create(null);n=n||M;var o=i(function(o){var u=o.pop(),c=n.apply(null,o);Le(e,c)?Cu(function(){u.apply(null,e[c])}):Le(r,c)?r[c].push(u):(r[c]=[u],t.apply(null,o.concat([i(function(t){e[c]=t;var n=r[c];delete r[c];for(var o=0,u=n.length;u>o;o++)n[o].apply(null,t)})])))});return o.memo=e,o.unmemoized=t,o}function Ae(t,n,e){e=e||a;var r=y(n)?[]:{};t(n,function(t,n,e){t(i(function(t,o){o.length<=1&&(o=o[0]),r[n]=o,e(t)}))},function(t){e(t,r)})}function ke(t,n,e){return Ae(R(n),t,e)}function xe(t,n){return Bn(function(n,e){t(n[0],e)},n,1)}function Ce(t,n){function e(t,n){return t.priority-n.priority}function r(t,n,e){for(var r=-1,o=t.length-1;o>r;){var u=r+(o-r+1>>>1);e(n,t[u])>=0?r=u:o=u-1}return r}function o(t,n,o,u){if(null!=u&&"function"!=typeof u)throw new Error("task callback must be a function");return t.started=!0,br(n)||(n=[n]),0===n.length?Cu(function(){t.drain()}):void C(n,function(n){var i={data:n,priority:o,callback:"function"==typeof u?u:a};t.tasks.splice(r(t.tasks,i,e)+1,0,i),t.tasks.length===t.concurrency&&t.saturated(),t.tasks.length<=t.concurrency-t.buffer&&t.unsaturated(),Cu(t.process)})}var u=xe(t,n);return u.push=function(t,n,e){o(u,t,n,e)},delete u.unshift,u}function Me(t,n){return function(e,r){if(null==e)return e;if(!y(e))return t(e,r);for(var o=e.length,u=n?o:-1,i=Object(e);(n?u--:++u<o)&&r(i[u],u,i)!==!1;);return e}}function Te(t,n){return"function"==typeof n&&br(t)?C(t,n):fi(t,T(n))}function Ie(t,n){return n=l(n||a),br(t)?t.length?void Te(t,function(t){t(n)}):n():n(new TypeError("First argument to race must be an array of functions"))}function Pe(t,n,e,r){var o=li.call(t).reverse();Wn(o,n,e,r)}function Ue(t,n,e,r){le(t,n,function(t,n){e(t,function(t,e){t?n(t):n(null,!e)})},r)}function Fe(t,n){return Ae(Ar,t,n)}function De(t,n,e){function r(t,n){if("object"==typeof n)t.times=+n.times||i,t.interval=+n.interval||c;else{if("number"!=typeof n&&"string"!=typeof n)throw new Error("Invalid arguments for async.retry");t.times=+n||i}}function o(t){return function(e){n(function(n,r){e(!n||t,{err:n,result:r})})}}function u(t){return function(n){setTimeout(function(){n(null)},t)}}var i=5,c=0,f={times:i,interval:c};if(arguments.length<3&&"function"==typeof t?(e=n||a,n=t):(r(f,t),e=e||a),"function"!=typeof n)throw new Error("Invalid arguments for async.retry");for(var l=[];f.times;){var s=!(f.times-=1);l.push(o(s)),!s&&f.interval>0&&l.push(u(f.interval))}Fe(l,function(t,n){n=n[n.length-1],e(n.err,n.result)})}function Ge(t,n,e){function r(t,n){var e=t.criteria,r=n.criteria;return r>e?-1:e>r?1:0}Ku(t,function(t,e){n(t,function(n,r){return n?e(n):void e(null,{value:t,criteria:r})})},function(t,n){return t?e(t):void e(null,N(n.sort(r),s("value")))})}function $e(t,n){function e(){a||(i.apply(null,arguments),clearTimeout(c))}function r(){var t=new Error("Callback function timed out.");t.code="ETIMEDOUT",a=!0,i(t)}function o(t){var n=Array.prototype.slice.call(t,0);return i=n[n.length-1],n[n.length-1]=e,n}function u(){c=setTimeout(r,n),t.apply(null,o(arguments))}var i,c,a=!1;return u}function Ne(t,n,e,r){for(var o=-1,u=mi(gi((n-t)/(e||1)),0),i=Array(u);u--;)i[r?u:++o]=t,t+=e;return i}function ze(t,n,e,r){return Hu(Ne(0,t,1),n,e,r)}function qe(t,n,e,r){3===arguments.length&&(r=e,e=n,n=br(t)?[]:{}),Lr(t,function(t,r,o){e(n,t,r,o)},function(t){r(t,n)})}function Be(t){return function(){return(t.unmemoized||t).apply(null,arguments)}}function Je(t,n,e){return re(function(){return!t.apply(this,arguments)},n,e)}function We(t,n){function e(o){if(r===t.length)return n.apply(null,[null].concat(o));var u=L(i(function(t,r){return t?n.apply(null,[t].concat(r)):void e(r)}));o.push(u);var c=t[r++];c.apply(null,o)}if(n=l(n||a),!br(t))return n(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return n();var r=0;e([])}var Qe="[object Function]",Xe="[object GeneratorFunction]",He=Object.prototype,Ke=He.toString,Ve=0/0,Ye=/^\s+|\s+$/g,Ze=/^[-+]0x[0-9a-f]+$/i,tr=/^0b[01]+$/i,nr=/^0o[0-7]+$/i,er=parseInt,rr=1/0,or=1.7976931348623157e308,ur="Expected a function",ir=Math.max,cr="Expected a function",ar=s("length"),fr=9007199254740991,lr=Object.prototype,sr=lr.hasOwnProperty,pr=Object.getPrototypeOf,yr=Object.keys,hr="[object Arguments]",vr=Object.prototype,dr=vr.hasOwnProperty,gr=vr.toString,mr=vr.propertyIsEnumerable,br=Array.isArray,jr="[object String]",Er=Object.prototype,Or=Er.toString,wr=9007199254740991,_r=/^(?:0|[1-9]\d*)$/,Sr=Object.prototype,Lr=k(A,1/0),Rr=c(Lr),Ar=k(A,1),kr=c(Ar),xr=i(function(t,n){return i(function(e){return t.apply(null,n.concat(e))})}),Cr=I(),Mr=Math.max,Tr=Array.prototype,Ir=Tr.splice,Pr=/[\\^$.*+?()[\]{}|]/g,Ur=/^\[object .+?Constructor\]$/,Fr=Object.prototype,Dr=Function.prototype.toString,Gr=Fr.hasOwnProperty,$r=RegExp("^"+Dr.call(Gr).replace(Pr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nr=Z(Object,"create"),zr=Object.prototype;tn.prototype=Nr?Nr(null):zr;var qr={"function":!0,object:!0},Br=qr[typeof t]&&t&&!t.nodeType?t:void 0,Jr=qr[typeof module]&&module&&!module.nodeType?module:void 0,Wr=nn(Br&&Jr&&"object"==typeof global&&global),Qr=nn(qr[typeof self]&&self),Xr=nn(qr[typeof window]&&window),Hr=nn(qr[typeof this]&&this),Kr=Wr||Xr!==(Hr&&Hr.window)&&Xr||Qr||Hr||Function("return this")(),Vr=Z(Kr,"Map"),Yr=Object.prototype,Zr=Yr.hasOwnProperty,to="__lodash_hash_undefined__",no=Object.prototype,eo=no.hasOwnProperty,ro="__lodash_hash_undefined__";hn.prototype.clear=en,hn.prototype["delete"]=cn,hn.prototype.get=fn,hn.prototype.has=ln,hn.prototype.set=yn;var oo=200;dn.prototype.clear=z,dn.prototype["delete"]=W,dn.prototype.get=X,dn.prototype.has=K,dn.prototype.set=vn;var uo=Object.prototype,io=uo.hasOwnProperty,co=Object.getOwnPropertySymbols,ao=co||function(){return[]},fo=Z(Kr,"Set"),lo=Z(Kr,"WeakMap"),so="[object Map]",po="[object Object]",yo="[object Set]",ho="[object WeakMap]",vo=Object.prototype,go=Function.prototype.toString,mo=vo.toString,bo=Vr?go.call(Vr):"",jo=fo?go.call(fo):"",Eo=lo?go.call(lo):"";(Vr&&_n(new Vr)!=so||fo&&_n(new fo)!=yo||lo&&_n(new lo)!=ho)&&(_n=function(t){var n=mo.call(t),e=n==po?t.constructor:null,r="function"==typeof e?go.call(e):"";if(r)switch(r){case bo:return so;case jo:return yo;case Eo:return ho}return n});var Oo=_n,wo=Object.prototype,_o=wo.hasOwnProperty,So=Kr.Uint8Array,Lo=/\w*$/,Ro=Kr.Symbol,Ao=Ro?Ro.prototype:void 0,ko=Ao?Ao.valueOf:void 0,xo="[object Boolean]",Co="[object Date]",Mo="[object Map]",To="[object Number]",Io="[object RegExp]",Po="[object Set]",Uo="[object String]",Fo="[object Symbol]",Do="[object ArrayBuffer]",Go="[object Float32Array]",$o="[object Float64Array]",No="[object Int8Array]",zo="[object Int16Array]",qo="[object Int32Array]",Bo="[object Uint8Array]",Jo="[object Uint8ClampedArray]",Wo="[object Uint16Array]",Qo="[object Uint32Array]",Xo=Object.create,Ho=Object.getPrototypeOf,Ko={"function":!0,object:!0},Vo=Ko[typeof t]&&t&&!t.nodeType?t:void 0,Yo=Ko[typeof module]&&module&&!module.nodeType?module:void 0,Zo=Yo&&Yo.exports===Vo?Vo:void 0,tu=Zo?Kr.Buffer:void 0,nu=tu?function(t){return t instanceof tu}:$n(!1),eu="[object Arguments]",ru="[object Array]",ou="[object Boolean]",uu="[object Date]",iu="[object Error]",cu="[object Function]",au="[object GeneratorFunction]",fu="[object Map]",lu="[object Number]",su="[object Object]",pu="[object RegExp]",yu="[object Set]",hu="[object String]",vu="[object Symbol]",du="[object WeakMap]",gu="[object ArrayBuffer]",mu="[object Float32Array]",bu="[object Float64Array]",ju="[object Int8Array]",Eu="[object Int16Array]",Ou="[object Int32Array]",wu="[object Uint8Array]",_u="[object Uint8ClampedArray]",Su="[object Uint16Array]",Lu="[object Uint32Array]",Ru={};Ru[eu]=Ru[ru]=Ru[gu]=Ru[ou]=Ru[uu]=Ru[mu]=Ru[bu]=Ru[ju]=Ru[Eu]=Ru[Ou]=Ru[fu]=Ru[lu]=Ru[su]=Ru[pu]=Ru[yu]=Ru[hu]=Ru[vu]=Ru[wu]=Ru[_u]=Ru[Su]=Ru[Lu]=!0,Ru[iu]=Ru[cu]=Ru[du]=!1;var Au,ku=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,xu="function"==typeof setImmediate&&setImmediate;Au=xu?xu:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:function(t){setTimeout(t,0)};var Cu=i(function(t,n){Au(function(){t.apply(null,n)})}),Mu=Array.prototype.reverse,Tu=Kn(Hn),Iu=Vn(Hn),Pu=i(function(t){var n=[null].concat(t);return function(){var t=[].slice.call(arguments).pop();return t.apply(this,n)}}),Uu=Yn(Lr,M,Zn),Fu=Yn(A,M,Zn),Du=Yn(Ar,M,Zn),Gu=te("dir"),$u=k(ce,1/0),Nu=k(ce,1),zu=Yn(A,fe,fe),qu=k(zu,1/0),Bu=k(zu,1),Ju=se(le),Wu=k(Ju,1/0),Qu=k(Ju,1),Xu=te("log"),Hu=se(he),Ku=k(Hu,1/0),Vu=k(Hu,1),Yu="[object Symbol]",Zu=Object.prototype,ti=Zu.toString,ni=1/0,ei=Ro?Ro.prototype:void 0,ri=ei?ei.toString:void 0,oi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,ui=/\\(\\)?/g,ii=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ci=/^\w*$/,ai=k(ke,1/0),fi=Me(P),li=Array.prototype.slice,si=se(Ue),pi=k(si,1/0),yi=k(si,1),hi=Yn(A,Boolean,M),vi=k(hi,1/0),di=k(hi,1),gi=Math.ceil,mi=Math.max,bi=k(ze,1/0),ji=k(ze,1),Ei={applyEach:Rr,applyEachSeries:kr,apply:xr,asyncify:x,auto:$,autoInject:qn,cargo:Jn,compose:Xn,concat:Tu,concatSeries:Iu,constant:Pu,detect:Uu,detectLimit:Fu,detectSeries:Du,dir:Gu,doDuring:ee,doUntil:ue,doWhilst:oe,during:ne,each:$u,eachLimit:ce,eachOf:Lr,eachOfLimit:A,eachOfSeries:Ar,eachSeries:Nu,ensureAsync:ae,every:qu,everyLimit:zu,everySeries:Bu,filter:Wu,filterLimit:Ju,filterSeries:Qu,forever:pe,iterator:ye,log:Xu,map:Ku,mapLimit:Hu,mapSeries:Vu,memoize:Re,nextTick:Cu,parallel:ai,parallelLimit:ke,priorityQueue:Ce,queue:xe,race:Ie,reduce:Wn,reduceRight:Pe,reject:pi,rejectLimit:si,rejectSeries:yi,retry:De,seq:Qn,series:Fe,setImmediate:Cu,some:vi,someLimit:hi,someSeries:di,sortBy:Ge,timeout:$e,times:bi,timesLimit:ze,timesSeries:ji,transform:qe,unmemoize:Be,until:Je,waterfall:We,whilst:re,all:qu,any:vi,forEach:$u,forEachSeries:Nu,forEachLimit:ce,forEachOf:Lr,forEachOfSeries:Ar,forEachOfLimit:A,inject:Wn,foldl:Wn,foldr:Pe,select:Wu,selectLimit:Ju,selectSeries:Qu,wrapSync:x};t["default"]=Ei,t.applyEach=Rr,t.applyEachSeries=kr,t.apply=xr,t.asyncify=x,t.auto=$,t.autoInject=qn,t.cargo=Jn,t.compose=Xn,t.concat=Tu,t.concatSeries=Iu,t.constant=Pu,t.detect=Uu,t.detectLimit=Fu,t.detectSeries=Du,t.dir=Gu,t.doDuring=ee,t.doUntil=ue,t.doWhilst=oe,t.during=ne,t.each=$u,t.eachLimit=ce,t.eachOf=Lr,t.eachOfLimit=A,t.eachOfSeries=Ar,t.eachSeries=Nu,t.ensureAsync=ae,t.every=qu,t.everyLimit=zu,t.everySeries=Bu,t.filter=Wu,t.filterLimit=Ju,t.filterSeries=Qu,t.forever=pe,t.iterator=ye,t.log=Xu,t.map=Ku,t.mapLimit=Hu,t.mapSeries=Vu,t.memoize=Re,t.nextTick=Cu,t.parallel=ai,t.parallelLimit=ke,t.priorityQueue=Ce,t.queue=xe,t.race=Ie,t.reduce=Wn,t.reduceRight=Pe,t.reject=pi,t.rejectLimit=si,t.rejectSeries=yi,t.retry=De,t.seq=Qn,t.series=Fe,t.setImmediate=Cu,t.some=vi,t.someLimit=hi,t.someSeries=di,t.sortBy=Ge,t.timeout=$e,t.times=bi,t.timesLimit=ze,t.timesSeries=ji,t.transform=qe,t.unmemoize=Be,t.until=Je,t.waterfall=We,t.whilst=re,t.all=qu,t.allLimit=zu,t.allSeries=Bu,t.any=vi,t.anyLimit=hi,t.anySeries=di,t.find=Uu,t.findLimit=Fu,t.findSeries=Du,t.forEach=$u,t.forEachSeries=Nu,t.forEachLimit=ce,t.forEachOf=Lr,t.forEachOfSeries=Ar,t.forEachOfLimit=A,t.inject=Wn,t.foldl=Wn,t.foldr=Pe,t.select=Wu,t.selectLimit=Ju,t.selectSeries=Qu,t.wrapSync=x});var ResourceState;!function(t){t[t.UNLOADED=0]="UNLOADED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"}(ResourceState||(ResourceState={}));var ResourceManager=function(){function t(){}var n=(__define,t),e=n.prototype;return e.exists=function(){return!0},e.readFile=function(t){return new ImageResource},e.writeFile=function(){},e.preload=function(t){var n=this,e=[];e="string"==typeof t?[t]:t;var r=e.map(function(t){var n=new JsonResource;return n.path=t,n}),o=async.priorityQueue(function(t,e){console.log("load "+t.path),n.onChange("complete",t),e()},2);this.q=o,o.drain=function(){console.log("all items have been processed")},o.push(r,0,function(t){console.log("finished processing foo")})},t}();egret.registerClass(ResourceManager,"ResourceManager");var JsonResource=function(){function t(){}var n=(__define,t),e=n.prototype;return e.preload=function(t){var n=new egret.URLRequest(this.path),e=new egret.URLLoader;e.dataFormat=egret.URLLoaderDataFormat.TEXT,e.addEventListener(egret.Event.COMPLETE,this.onComplete,this),e.load(n)},e.onComplete=function(t){var n=t.target;n.removeEventListener(egret.Event.COMPLETE,this.onComplete,this);var e=n.data;this.data=JSON.parse(e)},e.load=function(t){},e.unload=function(){},e.dispose=function(){},t}();egret.registerClass(JsonResource,"JsonResource",["ResourceFile"]);var ImageResource=function(){function t(){}var n=(__define,t),e=n.prototype;return e.preload=function(t){var n=new egret.URLRequest(this.path),e=new egret.URLLoader;e.dataFormat=egret.URLLoaderDataFormat.TEXTURE,e.addEventListener(egret.Event.COMPLETE,this.onComplete,this),e.load(n)},e.onComplete=function(t){var n=t.target;n.removeEventListener(egret.Event.COMPLETE,this.onComplete,this);var e=n.data;this.data=e},e.load=function(t){},e.unload=function(){},e.dispose=function(){},t}();egret.registerClass(ImageResource,"ImageResource",["ResourceFile"]);var ResourceShim=function(t){function n(){t.apply(this,arguments)}__extends(n,t);var e=(__define,n);e.prototype;return n}(egret.EventDispatcher);egret.registerClass(ResourceShim,"ResourceShim");var shim=new ResourceShim,resourceManager=new ResourceManager,RES;!function(t){function n(t,n,e){shim.addEventListener(t,n,e)}function e(t,n,e){shim.removeEventListener(t,n,e)}function r(n,e){var r=function(n,e){shim.dispatchEvent(new c(t.ResourceEvent.CONFIG_COMPLETE))};resourceManager.onChange=r,resourceManager.preload(n)}function o(t){console.log(t,a)}function u(t){return null}function i(t,n,e){}var c=function(t){function n(){t.apply(this,arguments)}__extends(n,t);var e=(__define,n);e.prototype;return n}(egret.Event);t.ResourceEvent=c,egret.registerClass(c,"RES.ResourceEvent"),t.fs=new ResourceManager;var c;!function(t){t.CONFIG_COMPLETE="CONFIG_COMPLETE",t.GROUP_COMPLETE="GROUP_COMPLETE",t.GROUP_LOAD_ERROR="GROUP_LOAD_ERROR",t.GROUP_PROGRESS="GROUP_PROGRESS"}(c=t.ResourceEvent||(t.ResourceEvent={})),t.addEventListener=n,t.removeEventListener=e,t.loadConfig=r;var a;t.loadGroup=o,t.getRes=u,t.getResAsync=i}(RES||(RES={}));